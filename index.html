<!DOCTYPE HTML>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Test</title>
    <meta name="description" content="test" />
    <meta name="keywords" content="test" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!--link rel="stylesheet" href="style.css" type="text/css"--> <!-- not working on android-->
    <link href='http://fonts.googleapis.com/css?family=Lato:400,900&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <!--script-- type="text/javascript" src="gen.js"></!--script--> <!-- not working on android-->
    <script>
        function hash(string) {
            const utf8 = new TextEncoder().encode(string);
            return crypto.subtle.digest('SHA-256', utf8).then((hashBuffer) => {
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                const hashHex = hashArray
                    .map((bytes) => bytes.toString(16).padStart(2, '0'))
                    .join('');
                return hashHex;
            });
        }
        function test() {
            var adress = document.getElementById("adress").value;
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var number_of_iterations = document.getElementById("number_of_iterations").value;
            var s = adress + username + password + number_of_iterations;

            
            hash(s).then((hex) => document.getElementById("result").innerHTML = hex);
            
        }
    </script>
    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: gray;
        }

        #container {
            margin-left: auto;
            margin-right: auto;
            margin-top: 10px;
            margin-bottom: 10px;
            width: 400px;
        }

        #naglowek {
            text-align: center;
        }
    </style>
</head>

<body>
    <div id="container">
        <div id="naglowek"><h1> Generator haseł </h1> </div>
        <fieldset>
            <legend> Adres strony</legend>
            <div><label><input type="text" id="adress" /></label></div>
        </fieldset>
        <fieldset>
            <legend> Nazwa użytkownika</legend>
            <div><label><input type="text" id="username" /></label></div>
        </fieldset>
        <fieldset>
            <legend> Główne hasło</legend>
            <div><label><input type="password" id="password" /></label></div>
        </fieldset>
        <fieldset>
            <legend> Liczba iteracji</legend>
            <div><label><input type="number" value="1" min="1" step="1" id="number_of_iterations" /></label></div>
        </fieldset>
        <fieldset>
            <legend> Wygenerowane hasło</legend>
            <div><div id="result"></div><label><input id="przycisk" value="generuj" type="button" onclick="test()" /></label></div>
        </fieldset>
    </div>
</body>
</html>
